(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b3855362"],{"133c":function(e,t,a){"use strict";a("7c25")},"391b":function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n})),a.d(t,"g",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return u}));var r=a("b775");function s(e,t,a){return Object(r["a"])({url:"/api/emps",method:"get",params:{pageNum:e,pageSize:t,token:a}})}function l(e,t,a,s){return Object(r["a"])({url:"/api/employee/search",method:"get",params:{condition:e,pageNum:t,pageSize:a,token:s}})}function o(e){return Object(r["a"])({url:"/api/emp",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/api/emp/delete",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/api/emp/update",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/api/dept/options",method:"get",params:{token:e}})}function u(e){return Object(r["a"])({url:"/api/post/options",method:"get",params:{token:e}})}},"3cbc":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pan-item",style:{zIndex:e.zIndex,height:e.height,width:e.width}},[a("div",{staticClass:"pan-info"},[a("div",{staticClass:"pan-info-roles-container"},[e._t("default")],2)]),a("div",{staticClass:"pan-thumb",style:{backgroundImage:"url("+e.image+")"}})])},s=[],l=(a("a9e3"),{name:"PanThumb",props:{image:{type:String,required:!0},zIndex:{type:Number,default:1},width:{type:String,default:"150px"},height:{type:String,default:"150px"}}}),o=l,n=(a("133c"),a("2877")),i=Object(n["a"])(o,r,s,!1,null,"799537af",null);t["a"]=i.exports},"6e50":function(e,t,a){"use strict";a("8214")},"7c25":function(e,t,a){},8214:function(e,t,a){},a890e:function(e,t,a){"use strict";a("ed35")},c179:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return o}));var r=a("b775");function s(e,t,a){return Object(r["a"])({url:"/api/password/update",method:"post",data:{oldPassword:e,newPassword:t,token:a}})}function l(e){return Object(r["a"])({url:"/api/password/reset/hr",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/api/password/reset/emp",method:"post",data:e})}},dc27:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return n}));var r=a("b775");function s(e,t,a){return Object(r["a"])({url:"/api/hrs",method:"get",params:{pageNum:e,pageSize:t,token:a}})}function l(e){return Object(r["a"])({url:"/api/hr",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/api/hr/delete",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/api/hr/update",method:"post",data:e})}},ecac:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.user?a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6,xs:24}},[a("user-card",{attrs:{user:e.user}})],1),a("el-col",{attrs:{span:18,xs:24}},[a("el-card",[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"基本资料",name:"user-info"}},[a(e.currentRole,{tag:"component",attrs:{user:e.user}})],1),a("el-tab-pane",{attrs:{label:"修改密码",name:"reset-pwd"}},[a("reset-pwd")],1)],1)],1)],1)],1)],1):e._e()])},s=[],l=a("5530"),o=(a("b0c0"),a("a15b"),a("2f62")),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("About me")])]),a("div",{staticClass:"user-profile"},[a("div",{staticClass:"box-center"},[a("pan-thumb",{attrs:{image:e.user.avatar,height:"100px",width:"100px",hoverable:!1}},[a("div",[e._v("Hello")]),e._v(" "+e._s(e.user.role)+" ")])],1),a("div",{staticClass:"box-center"},[a("div",{staticClass:"user-name text-center"},[e._v(e._s(e.user.name))]),a("div",{staticClass:"user-role text-center text-muted"},[e._v(e._s(e.user.role))])])]),a("div",{staticClass:"user-bio"},[a("div",{staticClass:"user-education user-bio-section"},[a("div",{staticClass:"user-bio-section-header"},[a("svg-icon",{attrs:{"icon-class":"education"}}),a("span",[e._v("个人简介")])],1),a("div",{staticClass:"user-bio-section-body"},[a("div",{staticClass:"text-muted"},[e._v(" "+e._s(e.user.avatar)+" ")])])])])])},i=[],c=a("3cbc"),u={components:{PanThumb:c["a"]},props:{user:{type:Object,default:function(){return{name:"",email:"",avatar:"",role:""}}}}},m=u,p=(a("a890e"),a("2877")),d=Object(p["a"])(m,n,i,!1,null,"7668008c",null),h=d.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-activity"},[a("div",{staticClass:"post"},[a("div",{staticClass:"user-block"},[a("img",{staticClass:"img-circle",attrs:{src:"https://wpimg.wallstcn.com/57ed425a-c71e-4201-9428-68760c0537c4.jpg"+e.avatarPrefix}}),a("span",{staticClass:"username text-muted"},[e._v("Iron Man")]),a("span",{staticClass:"description"},[e._v("Shared publicly - 7:30 PM today")])]),a("p",[e._v(" Lorem ipsum represents a long-held tradition for designers, typographers and the like. Some people hate it and argue for its demise, but others ignore the hate as they create awesome tools to help create filler text for everyone from bacon lovers to Charlie Sheen fans. ")]),a("ul",{staticClass:"list-inline"},[e._m(0),a("li",[a("span",{staticClass:"link-black text-sm"},[a("svg-icon",{attrs:{"icon-class":"like"}}),e._v(" Like ")],1)])])]),a("div",{staticClass:"post"},[a("div",{staticClass:"user-block"},[a("img",{staticClass:"img-circle",attrs:{src:"https://wpimg.wallstcn.com/9e2a5d0a-bd5b-457f-ac8e-86554616c87b.jpg"+e.avatarPrefix}}),a("span",{staticClass:"username text-muted"},[e._v("Captain American")]),a("span",{staticClass:"description"},[e._v("Sent you a message - yesterday")])]),a("p",[e._v(" Lorem ipsum represents a long-held tradition for designers, typographers and the like. Some people hate it and argue for its demise, but others ignore the hate as they create awesome tools to help create filler text for everyone from bacon lovers to Charlie Sheen fans. ")]),a("ul",{staticClass:"list-inline"},[e._m(1),a("li",[a("span",{staticClass:"link-black text-sm"},[a("svg-icon",{attrs:{"icon-class":"like"}}),e._v(" Like ")],1)])])]),a("div",{staticClass:"post"},[a("div",{staticClass:"user-block"},[a("img",{staticClass:"img-circle",attrs:{src:"https://wpimg.wallstcn.com/fb57f689-e1ab-443c-af12-8d4066e202e2.jpg"+e.avatarPrefix}}),a("span",{staticClass:"username"},[e._v("Spider Man")]),a("span",{staticClass:"description"},[e._v("Posted 4 photos - 2 days ago")])]),a("div",{staticClass:"user-images"},[a("el-carousel",{attrs:{interval:6e3,type:"card",height:"220px"}},e._l(e.carouselImages,(function(t){return a("el-carousel-item",{key:t},[a("img",{staticClass:"image",attrs:{src:t+e.carouselPrefix}})])})),1)],1),a("ul",{staticClass:"list-inline"},[e._m(2),a("li",[a("span",{staticClass:"link-black text-sm"},[a("svg-icon",{attrs:{"icon-class":"like"}}),e._v(" Like")],1)])])])])},b=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("span",{staticClass:"link-black text-sm"},[a("i",{staticClass:"el-icon-share"}),e._v(" Share ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("span",{staticClass:"link-black text-sm"},[a("i",{staticClass:"el-icon-share"}),e._v(" Share ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("span",{staticClass:"link-black text-sm"},[a("i",{staticClass:"el-icon-share"}),e._v(" Share")])])}],v="?imageView2/1/w/80/h/80",g="?imageView2/2/h/440",x={data:function(){return{carouselImages:["https://wpimg.wallstcn.com/9679ffb0-9e0b-4451-9916-e21992218054.jpg","https://wpimg.wallstcn.com/bcce3734-0837-4b9f-9261-351ef384f75a.jpg","https://wpimg.wallstcn.com/d1d7b033-d75e-4cd6-ae39-fcd5f1c0a7c5.jpg","https://wpimg.wallstcn.com/50530061-851b-4ca5-9dc5-2fead928a939.jpg"],avatarPrefix:v,carouselPrefix:g}}},w=x,y=(a("6e50"),Object(p["a"])(w,f,b,!1,null,"1066d76c",null)),k=y.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-timeline",e._l(e.timeline,(function(t,r){return a("el-timeline-item",{key:r,attrs:{timestamp:t.timestamp,placement:"top"}},[a("el-card",[a("h4",[e._v(e._s(t.title))]),a("p",[e._v(e._s(t.content))])])],1)})),1)],1)},F=[],$={data:function(){return{timeline:[{timestamp:"2019/4/20",title:"Update Github template",content:"PanJiaChen committed 2019/4/20 20:46"},{timestamp:"2019/4/21",title:"Update Github template",content:"PanJiaChen committed 2019/4/21 20:46"},{timestamp:"2019/4/22",title:"Build Template",content:"PanJiaChen committed 2019/4/22 20:46"},{timestamp:"2019/4/23",title:"Release New Version",content:"PanJiaChen committed 2019/4/23 20:46"}]}}},D=$,I=Object(p["a"])(D,_,F,!1,null,null,null),S=I.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",[a("el-form-item",{attrs:{label:"Name"}},[a("el-input",{model:{value:e.user.name,callback:function(t){e.$set(e.user,"name","string"===typeof t?t.trim():t)},expression:"user.name"}})],1),a("el-form-item",{attrs:{label:"Email"}},[a("el-input",{model:{value:e.user.email,callback:function(t){e.$set(e.user,"email","string"===typeof t?t.trim():t)},expression:"user.email"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("Update")])],1)],1)},C=[],j={props:{user:{type:Object,default:function(){return{name:"",email:""}}}},methods:{submit:function(){this.$message({message:"User information has been updated successfully",type:"success",duration:5e3})}}},z=j,P=Object(p["a"])(z,O,C,!1,null,null,null),E=P.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[a("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入旧密码",type:"password"},model:{value:e.user.oldPassword,callback:function(t){e.$set(e.user,"oldPassword",t)},expression:"user.oldPassword"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入新密码",type:"password"},model:{value:e.user.newPassword,callback:function(t){e.$set(e.user,"newPassword",t)},expression:"user.newPassword"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[a("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请确认密码",type:"password"},model:{value:e.user.confirmPassword,callback:function(t){e.$set(e.user,"confirmPassword",t)},expression:"user.confirmPassword"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},T=[],N=a("c179"),U=a("1c46"),R=a.n(U),q={data:function(){var e=this,t=function(t,a,r){e.user.newPassword!==a?r(new Error("两次输入的密码不一致")):r()};return{test:"1test",user:{oldPassword:void 0,newPassword:void 0,confirmPassword:void 0},rules:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:t,trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=R.a.createHash("SHA256");a.update(e.user.oldPassword);var r=a.digest("hex"),s=R.a.createHash("SHA256");s.update(e.user.newPassword);var l=s.digest("hex");Object(N["c"])(r,l,e.$store.getters.token).then((function(t){"success"===t.data?e.$message.info("修改成功"):"error"===t.data&&e.$message.error("修改失败")}))}}))},close:function(){this.$router.push({path:"/dashboard"})}}},H=q,K=Object(p["a"])(H,A,T,!1,null,null,null),Z=K.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户昵称",prop:"nickName"}},[a("el-input",{model:{value:e.user.nickName,callback:function(t){e.$set(e.user,"nickName",t)},expression:"user.nickName"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phonenumber"}},[a("el-input",{attrs:{maxlength:"11"},model:{value:e.user.phonenumber,callback:function(t){e.$set(e.user,"phonenumber",t)},expression:"user.phonenumber"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{maxlength:"50"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.user.sex,callback:function(t){e.$set(e.user,"sex",t)},expression:"user.sex"}},[a("el-radio",{attrs:{label:"0"}},[e._v("男")]),a("el-radio",{attrs:{label:"1"}},[e._v("女")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},M=[],J={props:{},data:function(){return{user:{nickName:"昵称",phonenumber:17300009999,email:"gcy@lut.com",sex:0},rules:{nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],phonenumber:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&updateUserProfile(e.user).then((function(t){e.msgSuccess("修改成功")}))}))},close:function(){this.$router.push({path:"/dashboard"})}}},L=J,V=Object(p["a"])(L,B,M,!1,null,null,null),G=V.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.user,"label-width":"80px"}},[a("el-form-item",{staticStyle:{width:"30%"},attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},W=[],X=a("1da1"),Y=(a("96cf"),a("b775"));function ee(e){return Object(Y["a"])({url:"/api/update/info/admin",method:"post",data:e})}function te(e,t){return Object(Y["a"])({url:"/api/hr/username",method:"get",params:{username:e,token:t}})}function ae(e,t){return Object(Y["a"])({url:"/api/employee/username",method:"get",params:{username:e,token:t}})}var re=a("a78e"),se=a.n(re),le={name:"AdminInfo",props:{user:{type:Object,default:function(){return{name:""}}}},data:function(){return{oldUserInfoOK:void 0}},created:function(){this.oldUserInfoOK=this.user.name},methods:{logout:function(){var e=this;return Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("user/logout");case 2:return se.a.remove("roleType"),t.next=5,e.$store.dispatch("role/setRoleType","employee");case 5:e.$router.push("/login");case 6:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;this.$refs["form"].validate((function(t){t&&ee({newUsername:e.user.name,oldUsername:e.oldUserInfoOK}).then((function(){e.$message.info("用户名修改成功，请重新登录！"),e.logout()}))}))},close:function(){this.$router.push({path:"/dashboard"})}}},oe=le,ne=Object(p["a"])(oe,Q,W,!1,null,"47401e9c",null),ie=ne.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"alterRuleForm",staticStyle:{width:"50%"},attrs:{model:e.alterFormData,rules:e.rules,"label-width":"200px","status-icon":!0}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名","label-width":"100px",size:"small",prop:"username"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户名",size:"small",disabled:""},model:{value:e.alterFormData.username,callback:function(t){e.$set(e.alterFormData,"username",t)},expression:"alterFormData.username"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名","label-width":"120px",size:"small",prop:"hrName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名",size:"small"},model:{value:e.alterFormData.hrName,callback:function(t){e.$set(e.alterFormData,"hrName",t)},expression:"alterFormData.hrName"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码","label-width":"100px",size:"small",prop:"hrTelephone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",placeholder:"请输入手机号码",size:"small"},model:{value:e.alterFormData.hrTelephone,callback:function(t){e.$set(e.alterFormData,"hrTelephone",e._n(t))},expression:"alterFormData.hrTelephone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别","label-width":"120px",size:"small",prop:"hrSex"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择性别",clearable:"",size:"small"},model:{value:e.alterFormData.hrSex,callback:function(t){e.$set(e.alterFormData,"hrSex",t)},expression:"alterFormData.hrSex"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"邮箱","label-width":"80px",size:"small",prop:"hrEmail"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off",placeholder:"请输入邮箱",size:"small"},model:{value:e.alterFormData.hrEmail,callback:function(t){e.$set(e.alterFormData,"hrEmail",t)},expression:"alterFormData.hrEmail"}})],1)],1),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"住址","label-width":"80px",size:"small",prop:"hrAddress"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入住址",size:"small"},model:{value:e.alterFormData.hrAddress,callback:function(t){e.$set(e.alterFormData,"hrAddress",t)},expression:"alterFormData.hrAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"个人简介","label-width":"100px",size:"medium",prop:"hrIntroduction"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{"show-word-limit":"",type:"textarea",rows:5,maxlength:"1024",placeholder:"个人简介：",size:"small"},model:{value:e.alterFormData.hrIntroduction,callback:function(t){e.$set(e.alterFormData,"hrIntroduction",t)},expression:"alterFormData.hrIntroduction"}})],1)],1)],1),a("el-row",[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.alterRuleForm("alterRuleForm")}}},[e._v("立即修改")]),a("el-button",{attrs:{plain:"",type:"warning",size:"small"},on:{click:e.close}},[e._v("关闭")])],1)],1)],1)},ue=[],me=a("dc27"),pe={name:"HrInfo",props:{user:{type:Object,default:function(){return{name:""}}}},data:function(){var e=function(e,t,a){setTimeout((function(){if(t){var e=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(!e.test(t))return a(new Error("请输入正确的邮箱格式"));a()}else a()}))},t=function(e,t,a){setTimeout((function(){if(t){var e=/^1[3|4|5|7|8|9][0-9]\d{8}$/;if(!e.test(t))return a(new Error("请输入正确的手机号"));a()}else a()}))};return{alterFormData:{username:void 0,hrName:void 0,hrTelephone:void 0,hrEmail:void 0,hrSex:"",hrAddress:void 0,hrIntroduction:void 0},options:[{value:"0",label:"男"},{value:"1",label:"女"}],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],hrName:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],hrTelephone:[{required:!1,validator:t,trigger:"change"}],hrSex:[{required:!1,message:"请选择性别",trigger:"blur"}],hrEmail:[{required:!1,validator:e,trigger:"change"}]},oldUserInfoOK:void 0}},created:function(){var e=this;this.oldUserInfoOK=this.user.name,te(this.oldUserInfoOK,this.$store.getters.token).then((function(t){var a=t.data;0===a.hrSex?a.hrSex="男":1===a.hrSex?a.hrSex="女":a.hrSex="",e.alterFormData=a}))},methods:{alterRuleForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;"男"===t.alterFormData.hrSex||"0"===t.alterFormData.hrSex?t.alterFormData.hrSex=0:t.alterFormData.hrSex=1,Object(me["d"])(t.alterFormData).then((function(e){t.$message.info("修改成功"),te(t.oldUserInfoOK,t.$store.getters.token).then((function(e){var a=e.data;0===a.hrSex?a.hrSex="男":1===a.hrSex?a.hrSex="女":a.hrSex="",t.alterFormData=a})),setTimeout((function(){t.$router.push({path:"/dashboard"})}),300)})).catch((function(e){t.$message.error("修改失败"),console.log(e)}))}))},close:function(){this.$router.push({path:"/dashboard"})}}},de=pe,he=Object(p["a"])(de,ce,ue,!1,null,"65cbbab2",null),fe=he.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",attrs:{model:e.alterFormData,rules:e.rules,size:"small","label-width":"100px","status-icon":!0}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{style:{width:"90%"},attrs:{placeholder:"请输入用户名",maxlength:15,clearable:"",disabled:""},model:{value:e.alterFormData.username,callback:function(t){e.$set(e.alterFormData,"username",t)},expression:"alterFormData.username"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名",prop:"empName"}},[a("el-input",{style:{width:"90%"},attrs:{placeholder:"请输入姓名",maxlength:15,clearable:""},model:{value:e.alterFormData.empName,callback:function(t){e.$set(e.alterFormData,"empName",t)},expression:"alterFormData.empName"}})],1)],1)],1),a("el-row",{attrs:{gutter:25}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别",prop:"empSex"}},[a("el-select",{style:{width:"90%"},attrs:{placeholder:"请择选性别",clearable:""},model:{value:e.alterFormData.empSex,callback:function(t){e.$set(e.alterFormData,"empSex",t)},expression:"alterFormData.empSex"}},e._l(e.empSexOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱",prop:"empEmail"}},[a("el-input",{style:{width:"90%"},attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:e.alterFormData.empEmail,callback:function(t){e.$set(e.alterFormData,"empEmail",t)},expression:"alterFormData.empEmail"}})],1)],1)],1),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码",prop:"empTelephone"}},[a("el-input",{style:{width:"90%"},attrs:{placeholder:"请输入手机号码",clearable:""},model:{value:e.alterFormData.empTelephone,callback:function(t){e.$set(e.alterFormData,"empTelephone",t)},expression:"alterFormData.empTelephone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"住址",prop:"empAddress"}},[a("el-input",{style:{width:"90%"},attrs:{placeholder:"请输入住址",clearable:""},model:{value:e.alterFormData.empAddress,callback:function(t){e.$set(e.alterFormData,"empAddress",t)},expression:"alterFormData.empAddress"}})],1)],1)],1),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证号",prop:"empIdnumber"}},[a("el-input",{style:{width:"90%"},attrs:{placeholder:"请输入身份证号",maxlength:18,clearable:""},model:{value:e.alterFormData.empIdnumber,callback:function(t){e.$set(e.alterFormData,"empIdnumber",t)},expression:"alterFormData.empIdnumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"银行卡号",prop:"empBank"}},[a("el-input",{style:{width:"90%"},attrs:{placeholder:"请输入银行卡号",maxlength:20,clearable:""},model:{value:e.alterFormData.empBank,callback:function(t){e.$set(e.alterFormData,"empBank",t)},expression:"alterFormData.empBank"}})],1)],1)],1),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入职时间",prop:"empHiredate"}},[a("el-date-picker",{style:{width:"90%"},attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"请选择入职时间",clearable:""},model:{value:e.alterFormData.empHiredate,callback:function(t){e.$set(e.alterFormData,"empHiredate",t)},expression:"alterFormData.empHiredate"}})],1)],1)],1),a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属部门",prop:"deptId"}},[a("el-select",{style:{width:"90%"},attrs:{placeholder:"请选择所属部门",filterable:"",clearable:""},model:{value:e.alterFormData.deptId,callback:function(t){e.$set(e.alterFormData,"deptId",t)},expression:"alterFormData.deptId"}},e._l(e.deptIdOptions,(function(e){return a("el-option",{key:e.dept_id,attrs:{label:e.dept_name,value:e.dept_id}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"岗位",prop:"postId"}},[a("el-select",{style:{width:"90%"},attrs:{placeholder:"请选择岗位",filterable:"",clearable:""},model:{value:e.alterFormData.postId,callback:function(t){e.$set(e.alterFormData,"postId",t)},expression:"alterFormData.postId"}},e._l(e.postIdOptions,(function(e){return a("el-option",{key:e.post_id,attrs:{label:e.post_name,value:e.post_id}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:15}},[a("el-form-item",{attrs:{label:"个人简介",prop:"empIntroduction"}},[a("el-input",{style:{width:"95%"},attrs:{type:"textarea",placeholder:"请输入个人简介",maxlength:1024,"show-word-limit":"",autosize:{minRows:3,maxRows:5}},model:{value:e.alterFormData.empIntroduction,callback:function(t){e.$set(e.alterFormData,"empIntroduction",t)},expression:"alterFormData.empIntroduction"}})],1)],1),a("el-row",[a("el-form-item",{attrs:{"label-width":"300px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.alterRuleForm("ruleForm")}}},[e._v("立即修改")]),a("el-button",{attrs:{plain:"",type:"warning",size:"small"},on:{click:e.close}},[e._v("返回")])],1)],1)],1)},ve=[],ge=a("391b"),xe={name:"EmployeeInfo",props:{user:{type:Object,default:function(){return{name:""}}}},data:function(){return{alterFormData:{empId:void 0,username:void 0,empName:void 0,empSex:void 0,empEmail:void 0,empTelephone:void 0,empAddress:"",empIdnumber:void 0,empBank:void 0,empHiredate:"",deptId:void 0,postId:void 0,empIntroduction:void 0},empSexOptions:[{label:"男",value:"男"},{label:"女",value:"女"}],deptIdOptions:[],postIdOptions:[],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],empName:[{required:!0,message:"请输入姓名",trigger:"blur"}],empSex:[],empEmail:[{pattern:/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,message:"请输入正确格式的邮箱",trigger:"blur"}],empTelephone:[{pattern:/^1[3|4|5|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号",trigger:"blur"}],empAddress:[],empIdnumber:[],empBank:[],empHiredate:[],deptId:[],postId:[],empIntroduction:[]},oldUserInfoOK:void 0}},created:function(){var e=this;this.oldUserInfoOK=this.user.name,ae(this.oldUserInfoOK,this.$store.getters.token).then((function(t){e.alterFormData=t.data})),this.initSelectForm()},methods:{initSelectForm:function(){var e=this;Object(ge["c"])(this.$store.getters.token).then((function(t){e.deptIdOptions=t.data})).catch((function(e){console.log(e)})),Object(ge["d"])(this.$store.getters.token).then((function(t){e.postIdOptions=t.data})).catch((function(e){console.log(e)}))},alterRuleForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(ge["g"])(t.alterFormData).then((function(e){t.$message.info("修改成功"),setTimeout((function(){t.$router.push({path:"/dashboard"})}),300)})).catch((function(e){t.$message.error("修改失败"),console.log(e)}))}))},close:function(){this.$router.push({path:"/dashboard"})}}},we=xe,ye=Object(p["a"])(we,be,ve,!1,null,"ed235a80",null),ke=ye.exports,_e={name:"Profile",components:{UserCard:h,Activity:k,Timeline:S,Account:E,resetPwd:Z,userInfo:G,AdminInfo:ie,HrInfo:fe,EmployeeInfo:ke},data:function(){return{currentRole:"AdminInfo",user:{},activeTab:"user-info"}},computed:Object(l["a"])({},Object(o["b"])(["name","avatar","roles","roleType"])),created:function(){this.getUser(),"admin"===this.roleType?this.currentRole="AdminInfo":"hr"===this.roleType?this.currentRole="HrInfo":"employee"===this.roleType&&(this.currentRole="EmployeeInfo")},methods:{getUser:function(){this.user={name:this.name,role:this.roles.join(" | "),email:"admin@lut.com",avatar:this.avatar}}}},Fe=_e,$e=Object(p["a"])(Fe,r,s,!1,null,null,null);t["default"]=$e.exports},ed35:function(e,t,a){}}]);