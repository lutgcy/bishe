(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34e4e6b4"],{15:function(e,t){},16:function(e,t){},17:function(e,t){},"2b66":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return c}));var l=a("53ca"),n=(a("c19f"),a("ace4"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("2b3d"),a("3ca3"),a("ddb0"),a("1146")),r=a.n(n);function o(e,t){t=t||"sheet1";var a={SheetNames:[t],Sheets:{}};a.Sheets[t]=e;var l={bookType:"xlsx",bookSST:!1,type:"binary"},n=r.a.write(a,l),o=new Blob([c(n)],{type:"application/octet-stream"});function c(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),l=0;l!=e.length;++l)a[l]=255&e.charCodeAt(l);return t}return o}function c(e,t){"object"===Object(l["a"])(e)&&e instanceof Blob&&(e=URL.createObjectURL(e));var a,n=document.createElement("a");n.href=e,n.download=t||"",window.MouseEvent?a=new MouseEvent("click"):(a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null)),n.dispatchEvent(a)}},"2efc":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return c}));var l=a("b775");function n(e){return Object(l["a"])({url:"/api/incometax/generate",method:"post",params:{token:e}})}function r(e){return Object(l["a"])({url:"/api/salary/generatenext",method:"post",params:{token:e}})}function o(e){return Object(l["a"])({url:"/api/salary/deletelast",method:"post",params:{token:e}})}function c(e,t,a,n){return Object(l["a"])({url:"/api/salary/search",method:"get",params:{condition:e,pageNum:t,pageSize:a,token:n}})}},"8ea0":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchFromData}},[a("el-form-item",{attrs:{prop:"empId",label:"员工编号",size:"medium"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{size:"small",placeholder:"请输入员工编号",clearable:""},model:{value:e.searchFromData.empId,callback:function(t){e.$set(e.searchFromData,"empId",t)},expression:"searchFromData.empId"}})],1),a("el-form-item",{attrs:{prop:"empName",label:"员工姓名",size:"medium"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{size:"small",placeholder:"请输入员工姓名",clearable:""},model:{value:e.searchFromData.empName,callback:function(t){e.$set(e.searchFromData,"empName",t)},expression:"searchFromData.empName"}})],1),a("el-form-item",{attrs:{prop:"yearOnly",label:"选择年份",size:"medium"}},[a("el-date-picker",{staticStyle:{"margin-right":"10px"},attrs:{type:"year",size:"small",clearable:"",placeholder:"选择年","value-format":"yyyy"},model:{value:e.searchFromData.yearOnly,callback:function(t){e.$set(e.searchFromData,"yearOnly",t)},expression:"searchFromData.yearOnly"}})],1),a("el-form-item",{attrs:{prop:"onlyMonth",label:"选择月份",size:"medium"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchFromData.onlyMonth,callback:function(t){e.$set(e.searchFromData,"onlyMonth",t)},expression:"searchFromData.onlyMonth"}},e._l(e.monthOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.search}},[e._v("查找")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),a("el-row",[a("el-button",{attrs:{plain:"",type:"success",icon:"el-icon-plus",size:"mini"},on:{click:e.generateNextMonth}},[e._v("生成下月工资")]),a("el-button",{attrs:{plain:"",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.deleteLastMonth}},[e._v("删除上月数据")]),a("el-button",{attrs:{plain:"",type:"warning",icon:"el-icon-document",size:"mini"},on:{click:e.handleDownload}},[e._v("导出当前页")]),a("el-button",{attrs:{plain:"",disabled:!1,type:"danger",icon:"el-icon-document",size:"mini"},on:{click:e.handleDownloadAll}},[e._v("导出所有页")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%",margin:"15px auto"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.7)",data:e.tableData,"tooltip-effect":"dark","header-cell-style":{background:"#EBEEF5",color:"#606266",textAlign:"center"},"cell-style":{textAlign:"center"},border:"","highlight-current-row":"","show-header":""}},[a("el-table-column",{attrs:{prop:"emp_id",label:"员工编号",width:"80"}}),a("el-table-column",{attrs:{prop:"emp_name",label:"员工姓名"}}),a("el-table-column",{attrs:{prop:"salary_year",label:"年份"}}),a("el-table-column",{attrs:{prop:"salary_month",label:"月份",width:"60"}}),a("el-table-column",{attrs:{label:"应发工资"}},[a("el-table-column",{attrs:{label:"基本工资",prop:"base_salary"}}),a("el-table-column",{attrs:{label:"岗位工资",prop:"post_salary"}})],1),a("el-table-column",{attrs:{label:"专项扣除"}},[a("el-table-column",{attrs:{label:"养老保险",prop:"per_old"}}),a("el-table-column",{attrs:{label:"医疗保险",prop:"per_medical"}}),a("el-table-column",{attrs:{label:"失业保险",prop:"per_fire"}}),a("el-table-column",{attrs:{label:"住房公积金",prop:"per_house"}})],1),a("el-table-column",{attrs:{label:"专项附加扣除"}},[a("el-table-column",{attrs:{label:"子女教育",prop:"child_edu"}}),a("el-table-column",{attrs:{label:"继续教育",prop:"continue_edu"}}),a("el-table-column",{attrs:{label:"住房租金",prop:"rent"}}),a("el-table-column",{attrs:{label:"住房贷款利息",prop:"credit"}}),a("el-table-column",{attrs:{label:"赡养老人",prop:"old_man"}}),a("el-table-column",{attrs:{label:"大病医疗",prop:"big_sick"}})],1),a("el-table-column",{attrs:{label:"应纳税所得额",prop:"taxable_income"}}),a("el-table-column",{attrs:{label:"个人所得税",prop:"tax_money"}}),a("el-table-column",{attrs:{label:"实发工资",prop:"real_salary"}})],1),[a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total,"current-page":e.listQuery.pageNum,"page-size":e.listQuery.pageSize,"page-sizes":[5,10,20,30,50]},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:current-page":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:pageSize":function(t){return e.$set(e.listQuery,"pageSize",t)},"update:page-size":function(t){return e.$set(e.listQuery,"pageSize",t)},"current-change":e.pageChange,"size-change":e.sizeChange}})]],2)},n=[],r=(a("841c"),a("ac1f"),a("d81d"),a("d3b7"),a("2efc")),o=a("1146"),c=a.n(o),s=a("2b66"),i={name:"Special",data:function(){return{listQuery:{total:0,pageNum:1,pageSize:10},tableData:[],searchFromData:{empId:void 0,empName:void 0,yearOnly:void 0,onlyMonth:void 0},total:void 0,loading:!1,searchChange:!1,monthOptions:[{value:"1",label:"一月"},{value:"2",label:"二月"},{value:"3",label:"三月"},{value:"4",label:"四月"},{value:"5",label:"五月"},{value:"6",label:"六月"},{value:"7",label:"七月"},{value:"8",label:"八月"},{value:"9",label:"九月"},{value:"10",label:"十月"},{value:"11",label:"十一月"},{value:"12",label:"十二月"}]}},watch:{searchFromData:{handler:function(){this.searchChange=!0},deep:!0}},created:function(){var e=this;this.getSalaryList(this.listQuery.pageNum,this.listQuery.pageSize),Object(r["d"])({},this.listQuery.pageNum,this.listQuery.pageSize,this.$store.getters.token).then((function(t){e.total=t.data.total}))},methods:{search:function(){var e=this,t={};this.searchFromData.empId&&(t["empId"]=this.searchFromData.empId),this.searchFromData.empName&&(t["empName"]=this.searchFromData.empName),this.searchFromData.yearOnly&&(t["yearOnly"]=this.searchFromData.yearOnly),this.searchFromData.onlyMonth&&(t["onlyMonth"]=this.searchFromData.onlyMonth),this.loading=!0,this.searchChange&&(this.listQuery.pageNum=1,this.searchChange=!1),Object(r["d"])(t,this.listQuery.pageNum,this.listQuery.pageSize,this.$store.getters.token).then((function(t){e.tableData=t.data.list,e.listQuery.total=t.data.total,e.loading=!1})).catch((function(){e.loading=!1}))},getSalaryList:function(e,t){this.search(e,t)},pageChange:function(){this.getSalaryList(this.listQuery.pageNum,this.listQuery.pageSize)},sizeChange:function(e){this.getSalaryList(1,e)},objectToArray:function(e){for(var t=[],a=0,l=["emp_id","emp_name","salary_year","salary_month","base_salary","post_salary","per_old","per_medical","per_fire","per_house","child_edu","continue_edu","rent","credit","old_man","big_sick","taxable_income","tax_money","real_salary"],n=0,r=l;n<r.length;n++){var o=r[n];t[a++]=e[o]?e[o]:""}return t},formatJson:function(e){var t=this;return e.map((function(e){return t.objectToArray(e)}))},handleDownload:function(){var e=this.formatJson(this.tableData);e.unshift(["员工编号","员工姓名","年份","月份","应发工资",null,"专项扣除",null,null,null,"专项附加扣除",null,null,null,null,null,"应纳税所得额","个人所得税","实发工资"],[null,null,null,null,"基本工资","岗位工资","养老保险","医疗保险","失业保险","住房公积金","子女教育","继续教育","住房租金","住房贷款利息","赡养老人","大病医疗",null,null,null]);var t=c.a.utils.aoa_to_sheet(e);t["!merges"]=[{s:{r:0,c:0},e:{r:1,c:0}},{s:{r:0,c:1},e:{r:1,c:1}},{s:{r:0,c:2},e:{r:1,c:2}},{s:{r:0,c:3},e:{r:1,c:3}},{s:{r:0,c:4},e:{r:0,c:5}},{s:{r:0,c:6},e:{r:0,c:9}},{s:{r:0,c:10},e:{r:0,c:15}},{s:{r:0,c:16},e:{r:1,c:16}},{s:{r:0,c:17},e:{r:1,c:17}},{s:{r:0,c:18},e:{r:1,c:18}}],Object(s["a"])(Object(s["b"])(t),"salary-page.xlsx")},handleDownloadAll:function(){var e=this,t=[];new Promise((function(a,l){var n={};e.searchFromData.empId&&(n["empId"]=e.searchFromData.empId),e.searchFromData.empName&&(n["empName"]=e.searchFromData.empName),e.searchFromData.yearOnly&&(n["yearOnly"]=e.searchFromData.yearOnly),e.searchFromData.onlyMonth&&(n["onlyMonth"]=e.searchFromData.onlyMonth),Object(r["d"])(n,1,e.total,e.$store.getters.token).then((function(e){t=e.data.list,a()})).catch((function(e){console.log(e),l()}))})).then((function(){var a=e.formatJson(t);a.unshift(["员工编号","员工姓名","年份","月份","应发工资",null,"专项扣除",null,null,null,"专项附加扣除",null,null,null,null,null,"应纳税所得额","个人所得税","实发工资"],[null,null,null,null,"基本工资","岗位工资","养老保险","医疗保险","失业保险","住房公积金","子女教育","继续教育","住房租金","住房贷款利息","赡养老人","大病医疗",null,null,null]);var l=c.a.utils.aoa_to_sheet(a);l["!merges"]=[{s:{r:0,c:0},e:{r:1,c:0}},{s:{r:0,c:1},e:{r:1,c:1}},{s:{r:0,c:2},e:{r:1,c:2}},{s:{r:0,c:3},e:{r:1,c:3}},{s:{r:0,c:4},e:{r:0,c:5}},{s:{r:0,c:6},e:{r:0,c:9}},{s:{r:0,c:10},e:{r:0,c:15}},{s:{r:0,c:16},e:{r:1,c:16}},{s:{r:0,c:17},e:{r:1,c:17}},{s:{r:0,c:18},e:{r:1,c:18}}],Object(s["a"])(Object(s["b"])(l),"salary-all.xlsx")}))},generate:function(){var e=this;this.$confirm("将重新生成数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,Object(r["c"])(e.$store.getters.token).then((function(){e.loading=!1,e.getSalaryList(e.listQuery.pageNum,e.listQuery.pageSize)})).catch()})).catch((function(){e.$message({type:"info",message:"已取消"})}))},generateNextMonth:function(){var e=this;this.$confirm("将生成下月数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,Object(r["b"])(e.$store.getters.token).then((function(){e.loading=!1,e.getSalaryList(e.listQuery.pageNum,e.listQuery.pageSize)})).catch()})).catch((function(){e.$message({type:"info",message:"已取消"})}))},deleteLastMonth:function(){var e=this;this.$confirm("将删除上月数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,Object(r["a"])(e.$store.getters.token).then((function(){e.loading=!1,e.getSalaryList(e.listQuery.pageNum,e.listQuery.pageSize)})).catch()})).catch((function(){e.$message({type:"info",message:"已取消"})}))},resetForm:function(e){this.$refs[e].resetFields()}}},u=i,m=a("2877"),p=Object(m["a"])(u,l,n,!1,null,"0c00a4f0",null);t["default"]=p.exports}}]);