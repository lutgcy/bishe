(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fff9908"],{15:function(e,t){},16:function(e,t){},17:function(e,t){},"2b66":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var n=a("53ca"),l=(a("c19f"),a("ace4"),a("d3b7"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("2b3d"),a("3ca3"),a("ddb0"),a("1146")),r=a.n(l);function o(e,t){t=t||"sheet1";var a={SheetNames:[t],Sheets:{}};a.Sheets[t]=e;var n={bookType:"xlsx",bookSST:!1,type:"binary"},l=r.a.write(a,n),o=new Blob([i(l)],{type:"application/octet-stream"});function i(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),n=0;n!=e.length;++n)a[n]=255&e.charCodeAt(n);return t}return o}function i(e,t){"object"===Object(n["a"])(e)&&e instanceof Blob&&(e=URL.createObjectURL(e));var a,l=document.createElement("a");l.href=e,l.download=t||"",window.MouseEvent?a=new MouseEvent("click"):(a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null)),l.dispatchEvent(a)}},"446c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.searchFromData}},[a("el-form-item",{attrs:{prop:"yearOnly",label:"选择年份",size:"medium"}},[a("el-date-picker",{staticStyle:{"margin-right":"10px"},attrs:{type:"year",size:"small",clearable:"",placeholder:"选择年","value-format":"yyyy"},model:{value:e.searchFromData.yearOnly,callback:function(t){e.$set(e.searchFromData,"yearOnly",t)},expression:"searchFromData.yearOnly"}})],1),a("el-form-item",{attrs:{prop:"onlyMonth",label:"选择月份",size:"medium"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchFromData.onlyMonth,callback:function(t){e.$set(e.searchFromData,"onlyMonth",t)},expression:"searchFromData.onlyMonth"}},e._l(e.monthOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.search}},[e._v("查找")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1),a("el-row",[a("el-button",{attrs:{plain:"",type:"warning",icon:"el-icon-document",size:"mini"},on:{click:e.handleDownload}},[e._v("导出当前页")]),a("el-button",{attrs:{plain:"",disabled:!1,type:"danger",icon:"el-icon-document",size:"mini"},on:{click:e.handleDownloadAll}},[e._v("导出所有页")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%",margin:"15px auto"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.7)",data:e.tableData,"tooltip-effect":"dark","header-cell-style":{background:"#EBEEF5",color:"#606266",textAlign:"center"},"cell-style":{textAlign:"center"},"highlight-current-row":"","show-header":""}},[a("el-table-column",{attrs:{prop:"emp_id",label:"员工编号"}}),a("el-table-column",{attrs:{prop:"emp_name",label:"员工姓名"}}),a("el-table-column",{attrs:{prop:"tax_year",label:"年份"}}),a("el-table-column",{attrs:{prop:"tax_month",label:"月份"}}),a("el-table-column",{attrs:{label:"应纳税所得额",prop:"taxable_income"}}),a("el-table-column",{attrs:{label:"应纳税额",prop:"tax_money"}})],1),[a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total,"current-page":e.listQuery.pageNum,"page-size":e.listQuery.pageSize,"page-sizes":[5,10,20,30,50]},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:current-page":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:pageSize":function(t){return e.$set(e.listQuery,"pageSize",t)},"update:page-size":function(t){return e.$set(e.listQuery,"pageSize",t)},"current-change":e.pageChange,"size-change":e.sizeChange}})]],2)},l=[],r=(a("841c"),a("ac1f"),a("d81d"),a("d3b7"),a("a8db")),o=a("1146"),i=a.n(o),c=a("2b66"),s={data:function(){return{listQuery:{total:0,pageNum:1,pageSize:10},tableData:[],searchFromData:{empId:void 0,empName:void 0,yearOnly:void 0,onlyMonth:void 0},total:void 0,loading:!1,searchChange:!1,monthOptions:[{value:"1",label:"一月"},{value:"2",label:"二月"},{value:"3",label:"三月"},{value:"4",label:"四月"},{value:"5",label:"五月"},{value:"6",label:"六月"},{value:"7",label:"七月"},{value:"8",label:"八月"},{value:"9",label:"九月"},{value:"10",label:"十月"},{value:"11",label:"十一月"},{value:"12",label:"十二月"}]}},watch:{searchFromData:{handler:function(){this.searchChange=!0},deep:!0}},created:function(){var e=this;this.getTaxDetailList(this.listQuery.pageNum,this.listQuery.pageSize),Object(r["b"])({},this.listQuery.pageNum,this.listQuery.pageSize,this.$store.getters.token).then((function(t){e.total=t.data.total}))},methods:{search:function(){var e=this,t={};this.searchFromData.yearOnly&&(t["yearOnly"]=this.searchFromData.yearOnly),this.searchFromData.onlyMonth&&(t["onlyMonth"]=this.searchFromData.onlyMonth),this.loading=!0,this.searchChange&&(this.listQuery.pageNum=1,this.searchChange=!1),Object(r["b"])(t,this.listQuery.pageNum,this.listQuery.pageSize,this.$store.getters.token).then((function(t){e.tableData=t.data.list,e.listQuery.total=t.data.total,e.loading=!1})).catch((function(){e.loading=!1}))},getTaxDetailList:function(e,t){this.search(e,t)},pageChange:function(){this.getTaxDetailList(this.listQuery.pageNum,this.listQuery.pageSize)},sizeChange:function(e){this.getTaxDetailList(1,e)},objectToArray:function(e){for(var t=[],a=0,n=["emp_id","emp_name","tax_year","tax_month","taxable_income","tax_money"],l=0,r=n;l<r.length;l++){var o=r[l];t[a++]=e[o]?e[o]:""}return t},formatJson:function(e){var t=this;return e.map((function(e){return t.objectToArray(e)}))},handleDownload:function(){var e=this.formatJson(this.tableData);e.unshift(["员工编号","员工姓名","年份","月份","应纳税所得额","应纳税额"]);var t=i.a.utils.aoa_to_sheet(e);Object(c["a"])(Object(c["b"])(t),"tax-page.xlsx")},handleDownloadAll:function(){var e=this,t=[];new Promise((function(a,n){var l={};e.searchFromData.yearOnly&&(l["yearOnly"]=e.searchFromData.yearOnly),e.searchFromData.onlyMonth&&(l["onlyMonth"]=e.searchFromData.onlyMonth),Object(r["b"])(l,1,e.total,e.$store.getters.token).then((function(e){t=e.data.list,a()})).catch((function(e){console.log(e),n()}))})).then((function(){var a=e.formatJson(t);a.unshift(["员工编号","员工姓名","年份","月份","应纳税所得额","应纳税额"]);var n=i.a.utils.aoa_to_sheet(a);Object(c["a"])(Object(c["b"])(n),"tax-all.xlsx")}))},generate:function(){var e=this;this.$confirm("将重新生成数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,Object(r["a"])(e.$store.getters.token).then((function(){e.loading=!1,e.getTaxDetailList(e.listQuery.pageNum,e.listQuery.pageSize)})).catch()})).catch((function(){e.$message({type:"info",message:"已取消"})}))},resetForm:function(e){this.$refs[e].resetFields()}}},u=s,h=a("2877"),m=Object(h["a"])(u,n,l,!1,null,"2479cd0b",null);t["default"]=m.exports},a8db:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return r}));var n=a("b775");function l(e){return Object(n["a"])({url:"/api/incometax/generate",method:"post",params:{token:e}})}function r(e,t,a,l){return Object(n["a"])({url:"/api/tax/search",method:"get",params:{condition:e,pageNum:t,pageSize:a,token:l}})}}}]);