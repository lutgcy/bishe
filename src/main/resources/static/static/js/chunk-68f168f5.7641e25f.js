(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68f168f5"],{"695e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:e.onOpen}},[e._v("新增")]),a("el-button",{attrs:{disabled:e.updateButtonDisable,type:"success",icon:"el-icon-edit",size:"mini"},on:{click:e.alterOnOpen}},[e._v("修改")]),a("el-button",{attrs:{disabled:e.deleteButtonDisable,type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.open}},[e._v("删除")]),a("el-button",{attrs:{disabled:e.deleteButtonDisable,type:"danger",icon:"el-icon-key",size:"mini"},on:{click:e.resetPwd}},[e._v("重置密码")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-document",size:"mini"},on:{click:e.handleDownload}},[e._v("导出当前页")]),a("el-button",{attrs:{disabled:!1,type:"danger",icon:"el-icon-document",size:"mini"},on:{click:e.handleDownloadAll}},[e._v("导出所有页")])],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%",margin:"15px auto"},attrs:{data:e.tableData,"tooltip-effect":"dark",border:"","highlight-current-row":"","show-header":"","header-cell-style":{background:"#EBEEF5",color:"#606266"}},on:{select:e.handleSelect,"select-all":e.handleSelectAll}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"hrName",label:"姓名"}}),a("el-table-column",{attrs:{prop:"hrSex",label:"性别"}}),a("el-table-column",{attrs:{prop:"hrTelephone",label:"手机号码"}}),a("el-table-column",{attrs:{prop:"hrEmail",width:"240",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"hrAddress",label:"住址"}}),a("el-table-column",{attrs:{prop:"hrIntroduction",label:"个人介绍","show-overflow-tooltip":""}})],1),[a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total,"current-page":e.listQuery.pageNum,"page-size":e.listQuery.pageSize,"page-sizes":[5,10,20,30,50]},on:{"update:currentPage":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:current-page":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:pageSize":function(t){return e.$set(e.listQuery,"pageSize",t)},"update:page-size":function(t){return e.$set(e.listQuery,"pageSize",t)},"current-change":e.pageChange,"size-change":e.sizeChange}})],[a("div",[a("el-dialog",{attrs:{title:"添加人力资源",visible:e.dialogFormVisible,width:"36%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.onClose}},[a("el-form",{ref:"ruleForm",attrs:{model:e.formData,rules:e.rules,"label-width":"200px","status-icon":!0}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名","label-width":"100px",size:"small",prop:"username"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户名",size:"small"},model:{value:e.formData.username,callback:function(t){e.$set(e.formData,"username",t)},expression:"formData.username"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名","label-width":"120px",size:"small",prop:"hrName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名",size:"small"},model:{value:e.formData.hrName,callback:function(t){e.$set(e.formData,"hrName",t)},expression:"formData.hrName"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码","label-width":"100px",size:"small",prop:"hrTelephone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",placeholder:"请输入手机号码",size:"small"},model:{value:e.formData.hrTelephone,callback:function(t){e.$set(e.formData,"hrTelephone",e._n(t))},expression:"formData.hrTelephone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别","label-width":"120px",size:"small",prop:"hrSex"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择性别",clearable:"",size:"small"},model:{value:e.formData.hrSex,callback:function(t){e.$set(e.formData,"hrSex",t)},expression:"formData.hrSex"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"邮箱","label-width":"80px",size:"small",prop:"hrEmail"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off",placeholder:"请输入邮箱",size:"small"},model:{value:e.formData.hrEmail,callback:function(t){e.$set(e.formData,"hrEmail",t)},expression:"formData.hrEmail"}})],1)],1),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"住址","label-width":"80px",size:"small",prop:"hrAddress"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入住址",size:"small"},model:{value:e.formData.hrAddress,callback:function(t){e.$set(e.formData,"hrAddress",t)},expression:"formData.hrAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"个人简介","label-width":"100px",size:"medium",prop:"hrIntroduction"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{"show-word-limit":"",type:"textarea",rows:5,maxlength:"1024",placeholder:"个人简介：",size:"small"},model:{value:e.formData.hrIntroduction,callback:function(t){e.$set(e.formData,"hrIntroduction",t)},expression:"formData.hrIntroduction"}})],1)],1)],1),a("el-row",[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即添加")]),a("el-button",{attrs:{plain:"",type:"warning",size:"small"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("清空表单")])],1)],1)],1)],1)],1)],[a("div",[a("el-dialog",{attrs:{title:"修改信息",visible:e.alterDialog,width:"36%"},on:{"update:visible":function(t){e.alterDialog=t},close:e.alterOnClose}},[a("el-form",{ref:"alterRuleForm",attrs:{model:e.alterFormData,rules:e.rules,"label-width":"200px","status-icon":!0}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"用户名","label-width":"100px",size:"small",prop:"username"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户名",size:"small",disabled:""},model:{value:e.alterFormData.username,callback:function(t){e.$set(e.alterFormData,"username",t)},expression:"alterFormData.username"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名","label-width":"120px",size:"small",prop:"hrName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名",size:"small"},model:{value:e.alterFormData.hrName,callback:function(t){e.$set(e.alterFormData,"hrName",t)},expression:"alterFormData.hrName"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机号码","label-width":"100px",size:"small",prop:"hrTelephone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{autocomplete:"off",placeholder:"请输入手机号码",size:"small"},model:{value:e.alterFormData.hrTelephone,callback:function(t){e.$set(e.alterFormData,"hrTelephone",e._n(t))},expression:"alterFormData.hrTelephone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别","label-width":"120px",size:"small",prop:"hrSex"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择性别",clearable:"",size:"small"},model:{value:e.alterFormData.hrSex,callback:function(t){e.$set(e.alterFormData,"hrSex",t)},expression:"alterFormData.hrSex"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"邮箱","label-width":"80px",size:"small",prop:"hrEmail"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off",placeholder:"请输入邮箱",size:"small"},model:{value:e.alterFormData.hrEmail,callback:function(t){e.$set(e.alterFormData,"hrEmail",t)},expression:"alterFormData.hrEmail"}})],1)],1),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"住址","label-width":"80px",size:"small",prop:"hrAddress"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入住址",size:"small"},model:{value:e.alterFormData.hrAddress,callback:function(t){e.$set(e.alterFormData,"hrAddress",t)},expression:"alterFormData.hrAddress"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"个人简介","label-width":"100px",size:"medium",prop:"hrIntroduction"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{"show-word-limit":"",type:"textarea",rows:5,maxlength:"1024",placeholder:"个人简介：",size:"small"},model:{value:e.alterFormData.hrIntroduction,callback:function(t){e.$set(e.alterFormData,"hrIntroduction",t)},expression:"alterFormData.hrIntroduction"}})],1)],1)],1),a("el-row",[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.alterRuleForm("alterRuleForm")}}},[e._v("立即修改")]),a("el-button",{attrs:{plain:"",type:"warning",size:"small"},on:{click:function(t){return e.resetForm("alterRuleForm")}}},[e._v("重置表单")])],1)],1)],1)],1)],1)]],2)},l=[],o=(a("159b"),a("d81d"),a("d3b7"),a("3ca3"),a("ddb0"),a("dc27")),i=a("c179"),n={components:{},data:function(){var e=function(e,t,a){setTimeout((function(){if(t){var e=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(!e.test(t))return a(new Error("请输入正确的邮箱格式"));a()}else a()}))},t=function(e,t,a){setTimeout((function(){if(t){var e=/^1[3|4|5|7|8|9][0-9]\d{8}$/;if(!e.test(t))return a(new Error("请输入正确的手机号"));a()}else a()}))};return{listQuery:{total:0,pageNum:1,pageSize:10},tableData:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},date_value:"",dialogFormVisible:!1,alterDialog:!1,updateButtonDisable:!0,deleteButtonDisable:!0,delPrimaryKeySet:[],formData:{username:void 0,hrName:void 0,hrTelephone:void 0,hrEmail:void 0,hrSex:"",hrAddress:void 0,hrIntroduction:void 0},alterFormData:{username:void 0,hrName:void 0,hrTelephone:void 0,hrEmail:void 0,hrSex:"",hrAddress:void 0,hrIntroduction:void 0},options:[{value:"0",label:"男"},{value:"1",label:"女"}],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],hrName:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符",trigger:"blur"}],hrTelephone:[{required:!1,validator:t,trigger:"change"}],hrSex:[{required:!1,message:"请选择性别",trigger:"blur"}],hrEmail:[{required:!1,validator:e,trigger:"change"}]}}},beforeCreate:function(){},created:function(){this.getHrsList(this.listQuery.pageNum,this.listQuery.pageSize)},methods:{pageChange:function(){this.getHrsList(this.listQuery.pageNum,this.listQuery.pageSize)},sizeChange:function(e){this.getHrsList(1,e)},resetPwd:function(){var e=this;this.$confirm("此操作将重置密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={};e.delPrimaryKeySet.forEach((function(e,a){t[a]=e})),Object(i["b"])(t).then((function(){e.$message.info("重置成功")})).catch((function(){e.$message.error("重置失败")}))})).catch((function(){e.$message({type:"info",message:"已取消"})}))},open:function(){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.handleDelete()})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleDelete:function(){var e=this,t={};this.delPrimaryKeySet.forEach((function(e,a){t[a]=e})),Object(o["b"])(t).then((function(t){e.$message.info("删除成功"),e.listQuery.pageNum=1,e.getHrsList(e.listQuery.pageNum,e.listQuery.pageSize)})).catch((function(t){e.$message.error("删除失败"),console.log(t)}))},handleSelectAll:function(e){var t=[];e.forEach((function(e){t.push(e.username)})),this.delPrimaryKeySet=t,e.length>0?this.deleteButtonDisable=!1:0===e.length&&(this.deleteButtonDisable=!0)},handleSelect:function(e,t){var a=[];e.forEach((function(e){a.push(e.username)})),this.delPrimaryKeySet=a,1===e.length?this.updateButtonDisable=!1:1!==e.length&&(this.updateButtonDisable=!0),e.length>0?this.deleteButtonDisable=!1:0===e.length&&(this.deleteButtonDisable=!0)},getTableHeader:function(e){var t=[],a=0;for(var r in e)t[a]=r,a++;return t},objectToArray:function(e){var t=[],a=0;for(var r in e){var l=e[r];t[a]=l,a++}return t},formatJson:function(e){var t=this;return e.map((function(e){return t.objectToArray(e)}))},handleDownload:function(){var e=this,t=this.formatJson(this.tableData);Promise.all([a.e("chunk-960adaac"),a.e("chunk-60bd4d29")]).then(a.bind(null,"4bf8")).then((function(a){a.export_json_to_excel({header:e.getTableHeader(e.tableData[0]),data:t,filename:"hr-list",autoWidth:!0,bookType:"xlsx"})}))},handleDownloadAll:function(){var e=this,t=[];new Promise((function(a,r){Object(o["c"])(1,e.listQuery.total,e.$store.getters.token).then((function(e){t=e.data.list,t.forEach((function(e){e.hrSex=0===e.hrSex?"男":"女"})),a()})).catch((function(e){console.log(e),r()}))})).then((function(){var r=e.formatJson(t);Promise.all([a.e("chunk-960adaac"),a.e("chunk-60bd4d29")]).then(a.bind(null,"4bf8")).then((function(a){a.export_json_to_excel({header:e.getTableHeader(t[0]),data:r,filename:"hr-all-list",autoWidth:!0,bookType:"xlsx"})}))}))},getHrsList:function(e,t){var a=this;Object(o["c"])(e,t,this.$store.getters.token).then((function(e){a.tableData=e.data.list,a.tableData.forEach((function(e){0===e.hrSex?e.hrSex="男":1===e.hrSex?e.hrSex="女":e.hrSex=""})),a.listQuery.total=e.data.total})).catch((function(e){console.log(e)}))},createHr:function(){var e=this;Object(o["a"])(this.formData).then((function(t){e.$message.info("添加成功"),e.listQuery.pageNum=1,e.getHrsList(e.listQuery.pageNum,e.listQuery.pageSize)})).catch((function(t){e.$message.error("添加失败"),console.log(t)}))},onOpen:function(){this.dialogFormVisible=!0},alterOnOpen:function(){var e=this;this.alterDialog=!0,this.tableData.forEach((function(t){t.username===e.delPrimaryKeySet[0]&&(e.alterFormData=t)}))},onClose:function(){},alterOnClose:function(){"0"===this.alterFormData.hrSex?this.alterFormData.hrSex="男":this.alterFormData.hrSex="女"},alterRuleForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;"男"===t.alterFormData.hrSex||"0"===t.alterFormData.hrSex?t.alterFormData.hrSex=0:t.alterFormData.hrSex=1,Object(o["d"])(t.alterFormData).then((function(a){t.$message.info("修改成功"),t.getHrsList(t.listQuery.pageNum,t.listQuery.pageSize),t.deleteButtonDisable=!0,t.updateButtonDisable=!0,setTimeout((function(){t.resetForm(e)}),1e3),t.alterDialog=!1})).catch((function(e){t.$message.error("修改失败"),console.log(e)}))}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;t.createHr(),setTimeout((function(){t.resetForm(e)}),1e3),t.dialogFormVisible=!1}))},resetForm:function(e){this.$refs[e].resetFields()}}},s=n,u=a("2877"),c=Object(u["a"])(s,r,l,!1,null,"e697dbe4",null);t["default"]=c.exports},c179:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var r=a("b775");function l(e,t,a){return Object(r["a"])({url:"/api/password/update",method:"post",data:{oldPassword:e,newPassword:t,token:a}})}function o(e){return Object(r["a"])({url:"/api/password/reset/hr",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/api/password/reset/emp",method:"post",data:e})}},dc27:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return n}));var r=a("b775");function l(e,t,a){return Object(r["a"])({url:"/api/hrs",method:"get",params:{pageNum:e,pageSize:t,token:a}})}function o(e){return Object(r["a"])({url:"/api/hr",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/api/hr/delete",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/api/hr/update",method:"post",data:e})}}}]);